<!DOCTYPE html>
<html>
<head>
  <title>Post Details</title>
  <style>
    table {
      margin-top: 20px;
    }

    table th {
      text-align: right;
      padding-right: 10px;
    }
  </style>
</head>
<body>
<h1>Post Details</h1>

<button onclick="updatePost()">글 수정하기!
  <input type=hidden id="updateId" th:value="${post.postId}">
</button>
<button onclick="deletePost()">글 삭제하기!
  <input type=hidden id="deleteId" th:value="${post.postId}">
</button>

<table>
  <tr>
    <th>Post ID</th>
    <td th:text="${post.postId}"></td>
  </tr>
  <tr>
    <th>Create Date</th>
    <td th:text="${post.createDate}"></td>
  </tr>
  <tr>
    <th>Update Date</th>
    <td th:text="${post.updateDate}"></td>
  </tr>
  <tr>
    <th>Title</th>
    <td th:text="${post.title}"></td>
  </tr>
  <tr>
    <th>Contents</th>
    <td th:text="${post.contents}" id="contents"></td>
  </tr>
</table>

</body>
</html>

<script>
  // window.onload = function() {
  //     let content = document.getElementById('contents');
  //     var boldText = content.textContent.replace(/<b>(.*?)<\/b>/g, "<b><strong>$1</strong></b>");
  //     content.textContent = boldText;
  //     //console.log(content.textContent);
  //     //content.textContent="onload";
  // };

  document.addEventListener("DOMContentLoaded", function() {
    let contentsElement = document.getElementById("contents");
    let boldText = contentsElement.textContent.replace(/\*\*(.*?)\*\*/g, "<strong>$1</strong>");
    contentsElement.innerHTML = boldText;
  });

  function deletePost(){
    //작성자 확인 필요
    let id=document.getElementById('deleteId').value;
    let isDelete=confirm("정말 삭제하시겠습니까?");
    if(isDelete){
      window.location.href="/post/"+id+"/deletePost";
    }
  }

  function updatePost(){
    //작성자 확인 필요
    let id=document.getElementById('updateId').value;
    let isUpdate=confirm("게시글을 수정하시겠습니까?");
    if(isUpdate){
      window.location.href="/post/"+id+"/updatePost";
    }
  }
</script>